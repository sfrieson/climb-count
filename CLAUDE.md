# climb-count

## Project Overview

This appears to be a climbing-related counting application.

**Important**: This repository is completely generated by Claude. Please leave context in comments and documentation to make it easy for future updates.

## Development Commands

- `npm run dev` - Start Vite development server on port 8000
- `npm start` - Alias for `npm run dev`
- `npm run build` - Build for production with Vite
- `npm run preview` - Preview production build locally
- `npm test` - Run Jest tests (basic functionality tests only)
- `npm run test:watch` - Run tests in watch mode
- `npm run test:coverage` - Run tests with coverage report
- `npm run lint` - Run ESLint on JavaScript files
- `npm run lint:fix` - Run ESLint and auto-fix issues
- `npm run format` - Format code with Prettier
- `npm run format:check` - Check if code is formatted correctly
- `npm run validate` - Run lint, format check, and tests

## Project Structure

- `src/main.js` - Main application entry point (ESM)
- `src/controllers/` - Application controllers (MVC pattern, ESM)
- `src/models/` - Data models and business logic (ESM)
- `src/views/` - UI views and DOM manipulation (ESM)
- `tests/` - Jest test files (limited to basic functionality tests)
- `dist/` - Built files for production (generated by Vite)
- `sw.js` - Service worker for PWA functionality
- `manifest.json` - PWA manifest
- `index.html` - Main HTML file
- `vite.config.js` - Vite build configuration

## Notes

- **Modern Build System**: Now uses Vite for fast development and production builds
- **ES Modules**: Converted from script tags to proper ESM imports/exports
- **Progressive Web App (PWA)** with offline capability
- **MVC Architecture** using vanilla JavaScript with proper module system
- **IndexedDB** for route storage, **localStorage** for session data
- **GitHub Actions** with build pipeline for automated deployment to GitHub Pages
- **Development tooling**: Vite, ESLint, Prettier, Jest, and Husky for pre-commit hooks
- **No legacy browser support** - targets modern browsers only

## Instructions for Claude (Code Changes)

**IMPORTANT**: When making any code changes to this project, you MUST:

1. **Before making changes**: Run `npm run build` and `npm run test` to understand current state
2. **After making changes**: Always run these commands in sequence:
   - `npm run lint:fix` - Fix any linting issues
   - `npm run format` - Format all code consistently  
   - `npm run test` - Ensure all tests pass
   - `npm run build` - Verify production build works
   - `npm run validate` - Run full validation suite (note: may have linting/formatting conflicts)

3. **Module System**:
   - All new code should use ES modules (`import`/`export`)
   - Place modules in appropriate `src/` subdirectories
   - Use proper exports: `export class ClassName` or `export { functionName }`
   - Import with full file extensions: `import { Class } from "./path/file.js"`

4. **Testing Requirements**:
   - Write tests for new functionality in `tests/` directory
   - Currently only basic functionality tests are enabled due to ESM complexity
   - Follow existing test patterns in setup.js
   - Focus on core business logic testing

5. **Code Style**:
   - Follow ESLint rules (defined in eslint.config.js) 
   - Use double quotes, 2-space indentation
   - Add JSDoc comments for functions and classes
   - Keep functions small and focused
   - Note: Some conflicts between ESLint and Prettier may occur

6. **Build System**:
   - Use `npm run dev` for development (Vite dev server)
   - Use `npm run build` to create production builds
   - Built files are output to `dist/` directory
   - GitHub Actions automatically builds and deploys on push to main

7. **Documentation**:
   - Update this CLAUDE.md file when adding new features
   - Document any new npm scripts or tools
   - Add inline comments explaining complex logic
   - Update project structure section for new directories/files
